{"ast":null,"code":"import { useState } from 'react';\nimport { resolveHookState } from '../misc/hookState';\nimport useEffectOnce from '../useEffectOnce';\nimport useIsomorphicLayoutEffect from '../useIsomorphicLayoutEffect';\nexport function createGlobalState(initialState) {\n  var store = {\n    state: initialState instanceof Function ? initialState() : initialState,\n    setState: function (nextState) {\n      store.state = resolveHookState(nextState, store.state);\n      store.setters.forEach(function (setter) {\n        return setter(store.state);\n      });\n    },\n    setters: []\n  };\n  return function () {\n    var _a = useState(store.state),\n        globalState = _a[0],\n        stateSetter = _a[1];\n\n    useEffectOnce(function () {\n      return function () {\n        store.setters = store.setters.filter(function (setter) {\n          return setter !== stateSetter;\n        });\n      };\n    });\n    useIsomorphicLayoutEffect(function () {\n      if (!store.setters.includes(stateSetter)) {\n        store.setters.push(stateSetter);\n      }\n    });\n    return [globalState, store.setState];\n  };\n}\nexport default createGlobalState;","map":{"version":3,"sources":["/Users/willliu/projects/personalprojects/seernft/client/node_modules/react-use/esm/factory/createGlobalState.js"],"names":["useState","resolveHookState","useEffectOnce","useIsomorphicLayoutEffect","createGlobalState","initialState","store","state","Function","setState","nextState","setters","forEach","setter","_a","globalState","stateSetter","filter","includes","push"],"mappings":"AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,gBAAT,QAAiC,mBAAjC;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,yBAAP,MAAsC,8BAAtC;AACA,OAAO,SAASC,iBAAT,CAA2BC,YAA3B,EAAyC;AAC5C,MAAIC,KAAK,GAAG;AACRC,IAAAA,KAAK,EAAEF,YAAY,YAAYG,QAAxB,GAAmCH,YAAY,EAA/C,GAAoDA,YADnD;AAERI,IAAAA,QAAQ,EAAE,UAAUC,SAAV,EAAqB;AAC3BJ,MAAAA,KAAK,CAACC,KAAN,GAAcN,gBAAgB,CAACS,SAAD,EAAYJ,KAAK,CAACC,KAAlB,CAA9B;AACAD,MAAAA,KAAK,CAACK,OAAN,CAAcC,OAAd,CAAsB,UAAUC,MAAV,EAAkB;AAAE,eAAOA,MAAM,CAACP,KAAK,CAACC,KAAP,CAAb;AAA6B,OAAvE;AACH,KALO;AAMRI,IAAAA,OAAO,EAAE;AAND,GAAZ;AAQA,SAAO,YAAY;AACf,QAAIG,EAAE,GAAGd,QAAQ,CAACM,KAAK,CAACC,KAAP,CAAjB;AAAA,QAAgCQ,WAAW,GAAGD,EAAE,CAAC,CAAD,CAAhD;AAAA,QAAqDE,WAAW,GAAGF,EAAE,CAAC,CAAD,CAArE;;AACAZ,IAAAA,aAAa,CAAC,YAAY;AAAE,aAAO,YAAY;AAC3CI,QAAAA,KAAK,CAACK,OAAN,GAAgBL,KAAK,CAACK,OAAN,CAAcM,MAAd,CAAqB,UAAUJ,MAAV,EAAkB;AAAE,iBAAOA,MAAM,KAAKG,WAAlB;AAAgC,SAAzE,CAAhB;AACH,OAF2B;AAExB,KAFS,CAAb;AAGAb,IAAAA,yBAAyB,CAAC,YAAY;AAClC,UAAI,CAACG,KAAK,CAACK,OAAN,CAAcO,QAAd,CAAuBF,WAAvB,CAAL,EAA0C;AACtCV,QAAAA,KAAK,CAACK,OAAN,CAAcQ,IAAd,CAAmBH,WAAnB;AACH;AACJ,KAJwB,CAAzB;AAKA,WAAO,CAACD,WAAD,EAAcT,KAAK,CAACG,QAApB,CAAP;AACH,GAXD;AAYH;AACD,eAAeL,iBAAf","sourcesContent":["import { useState } from 'react';\nimport { resolveHookState } from '../misc/hookState';\nimport useEffectOnce from '../useEffectOnce';\nimport useIsomorphicLayoutEffect from '../useIsomorphicLayoutEffect';\nexport function createGlobalState(initialState) {\n    var store = {\n        state: initialState instanceof Function ? initialState() : initialState,\n        setState: function (nextState) {\n            store.state = resolveHookState(nextState, store.state);\n            store.setters.forEach(function (setter) { return setter(store.state); });\n        },\n        setters: [],\n    };\n    return function () {\n        var _a = useState(store.state), globalState = _a[0], stateSetter = _a[1];\n        useEffectOnce(function () { return function () {\n            store.setters = store.setters.filter(function (setter) { return setter !== stateSetter; });\n        }; });\n        useIsomorphicLayoutEffect(function () {\n            if (!store.setters.includes(stateSetter)) {\n                store.setters.push(stateSetter);\n            }\n        });\n        return [globalState, store.setState];\n    };\n}\nexport default createGlobalState;\n"]},"metadata":{},"sourceType":"module"}