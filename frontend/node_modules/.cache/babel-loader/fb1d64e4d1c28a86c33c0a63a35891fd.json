{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport { isNavigator, off, on } from './misc/util';\nimport isDeepEqual from './misc/isDeepEqual';\nvar nav = isNavigator ? navigator : undefined;\nvar isBatteryApiSupported = nav && typeof nav.getBattery === 'function';\n\nfunction useBatteryMock() {\n  return {\n    isSupported: false\n  };\n}\n\nfunction useBattery() {\n  var _a = useState({\n    isSupported: true,\n    fetched: false\n  }),\n      state = _a[0],\n      setState = _a[1];\n\n  useEffect(function () {\n    var isMounted = true;\n    var battery = null;\n\n    var handleChange = function () {\n      if (!isMounted || !battery) {\n        return;\n      }\n\n      var newState = {\n        isSupported: true,\n        fetched: true,\n        level: battery.level,\n        charging: battery.charging,\n        dischargingTime: battery.dischargingTime,\n        chargingTime: battery.chargingTime\n      };\n      !isDeepEqual(state, newState) && setState(newState);\n    };\n\n    nav.getBattery().then(function (bat) {\n      if (!isMounted) {\n        return;\n      }\n\n      battery = bat;\n      on(battery, 'chargingchange', handleChange);\n      on(battery, 'chargingtimechange', handleChange);\n      on(battery, 'dischargingtimechange', handleChange);\n      on(battery, 'levelchange', handleChange);\n      handleChange();\n    });\n    return function () {\n      isMounted = false;\n\n      if (battery) {\n        off(battery, 'chargingchange', handleChange);\n        off(battery, 'chargingtimechange', handleChange);\n        off(battery, 'dischargingtimechange', handleChange);\n        off(battery, 'levelchange', handleChange);\n      }\n    };\n  }, []);\n  return state;\n}\n\nexport default isBatteryApiSupported ? useBattery : useBatteryMock;","map":{"version":3,"sources":["/Users/willliu/projects/personalprojects/seernft/client/node_modules/react-use/esm/useBattery.js"],"names":["useEffect","useState","isNavigator","off","on","isDeepEqual","nav","navigator","undefined","isBatteryApiSupported","getBattery","useBatteryMock","isSupported","useBattery","_a","fetched","state","setState","isMounted","battery","handleChange","newState","level","charging","dischargingTime","chargingTime","then","bat"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,WAAT,EAAsBC,GAAtB,EAA2BC,EAA3B,QAAqC,aAArC;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,IAAIC,GAAG,GAAGJ,WAAW,GAAGK,SAAH,GAAeC,SAApC;AACA,IAAIC,qBAAqB,GAAGH,GAAG,IAAI,OAAOA,GAAG,CAACI,UAAX,KAA0B,UAA7D;;AACA,SAASC,cAAT,GAA0B;AACtB,SAAO;AAAEC,IAAAA,WAAW,EAAE;AAAf,GAAP;AACH;;AACD,SAASC,UAAT,GAAsB;AAClB,MAAIC,EAAE,GAAGb,QAAQ,CAAC;AAAEW,IAAAA,WAAW,EAAE,IAAf;AAAqBG,IAAAA,OAAO,EAAE;AAA9B,GAAD,CAAjB;AAAA,MAA0DC,KAAK,GAAGF,EAAE,CAAC,CAAD,CAApE;AAAA,MAAyEG,QAAQ,GAAGH,EAAE,CAAC,CAAD,CAAtF;;AACAd,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAIkB,SAAS,GAAG,IAAhB;AACA,QAAIC,OAAO,GAAG,IAAd;;AACA,QAAIC,YAAY,GAAG,YAAY;AAC3B,UAAI,CAACF,SAAD,IAAc,CAACC,OAAnB,EAA4B;AACxB;AACH;;AACD,UAAIE,QAAQ,GAAG;AACXT,QAAAA,WAAW,EAAE,IADF;AAEXG,QAAAA,OAAO,EAAE,IAFE;AAGXO,QAAAA,KAAK,EAAEH,OAAO,CAACG,KAHJ;AAIXC,QAAAA,QAAQ,EAAEJ,OAAO,CAACI,QAJP;AAKXC,QAAAA,eAAe,EAAEL,OAAO,CAACK,eALd;AAMXC,QAAAA,YAAY,EAAEN,OAAO,CAACM;AANX,OAAf;AAQA,OAACpB,WAAW,CAACW,KAAD,EAAQK,QAAR,CAAZ,IAAiCJ,QAAQ,CAACI,QAAD,CAAzC;AACH,KAbD;;AAcAf,IAAAA,GAAG,CAACI,UAAJ,GAAiBgB,IAAjB,CAAsB,UAAUC,GAAV,EAAe;AACjC,UAAI,CAACT,SAAL,EAAgB;AACZ;AACH;;AACDC,MAAAA,OAAO,GAAGQ,GAAV;AACAvB,MAAAA,EAAE,CAACe,OAAD,EAAU,gBAAV,EAA4BC,YAA5B,CAAF;AACAhB,MAAAA,EAAE,CAACe,OAAD,EAAU,oBAAV,EAAgCC,YAAhC,CAAF;AACAhB,MAAAA,EAAE,CAACe,OAAD,EAAU,uBAAV,EAAmCC,YAAnC,CAAF;AACAhB,MAAAA,EAAE,CAACe,OAAD,EAAU,aAAV,EAAyBC,YAAzB,CAAF;AACAA,MAAAA,YAAY;AACf,KAVD;AAWA,WAAO,YAAY;AACfF,MAAAA,SAAS,GAAG,KAAZ;;AACA,UAAIC,OAAJ,EAAa;AACThB,QAAAA,GAAG,CAACgB,OAAD,EAAU,gBAAV,EAA4BC,YAA5B,CAAH;AACAjB,QAAAA,GAAG,CAACgB,OAAD,EAAU,oBAAV,EAAgCC,YAAhC,CAAH;AACAjB,QAAAA,GAAG,CAACgB,OAAD,EAAU,uBAAV,EAAmCC,YAAnC,CAAH;AACAjB,QAAAA,GAAG,CAACgB,OAAD,EAAU,aAAV,EAAyBC,YAAzB,CAAH;AACH;AACJ,KARD;AASH,GArCQ,EAqCN,EArCM,CAAT;AAsCA,SAAOJ,KAAP;AACH;;AACD,eAAeP,qBAAqB,GAAGI,UAAH,GAAgBF,cAApD","sourcesContent":["import { useEffect, useState } from 'react';\nimport { isNavigator, off, on } from './misc/util';\nimport isDeepEqual from './misc/isDeepEqual';\nvar nav = isNavigator ? navigator : undefined;\nvar isBatteryApiSupported = nav && typeof nav.getBattery === 'function';\nfunction useBatteryMock() {\n    return { isSupported: false };\n}\nfunction useBattery() {\n    var _a = useState({ isSupported: true, fetched: false }), state = _a[0], setState = _a[1];\n    useEffect(function () {\n        var isMounted = true;\n        var battery = null;\n        var handleChange = function () {\n            if (!isMounted || !battery) {\n                return;\n            }\n            var newState = {\n                isSupported: true,\n                fetched: true,\n                level: battery.level,\n                charging: battery.charging,\n                dischargingTime: battery.dischargingTime,\n                chargingTime: battery.chargingTime,\n            };\n            !isDeepEqual(state, newState) && setState(newState);\n        };\n        nav.getBattery().then(function (bat) {\n            if (!isMounted) {\n                return;\n            }\n            battery = bat;\n            on(battery, 'chargingchange', handleChange);\n            on(battery, 'chargingtimechange', handleChange);\n            on(battery, 'dischargingtimechange', handleChange);\n            on(battery, 'levelchange', handleChange);\n            handleChange();\n        });\n        return function () {\n            isMounted = false;\n            if (battery) {\n                off(battery, 'chargingchange', handleChange);\n                off(battery, 'chargingtimechange', handleChange);\n                off(battery, 'dischargingtimechange', handleChange);\n                off(battery, 'levelchange', handleChange);\n            }\n        };\n    }, []);\n    return state;\n}\nexport default isBatteryApiSupported ? useBattery : useBatteryMock;\n"]},"metadata":{},"sourceType":"module"}